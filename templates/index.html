<!DOCTYPE html>
<html>
<head>
    <title>Mindys Golden Tickets</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <style>
      .header-container {
        position: relative;
        width: 100%;
        text-align: center;
        margin-bottom: 1rem;
      }
      .header-img {
        width: 100%;
        height: auto;
        display: block;
      }
      .overlay-title {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-size: 4rem;
        font-family: 'Georgia', serif;
        color: #A52A2A;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        background: transparent;
        margin: 0;
        padding: 0.5rem 1rem;
      }
      .ticket {
        font-size: 4rem;
        display: inline-block;
        transition: transform 0.3s ease;
      }
      .ticket:hover {
        transform: scale(1.8);
      }
      .ticket.used {
        animation: ticketGlow 1s infinite alternate;
      }
      @keyframes ticketGlow {
        0% { text-shadow: 0 0 10px gold; }
        100% { text-shadow: 0 0 30px gold; }
      }
      .ticket-container {
        display: flex;
        flex-wrap: wrap;
        justify-content: space-evenly;
        gap: 1rem;
        margin: 2rem 0;
      }

      .secret-form {
        background: rgba(255,255,255,0.8);
        padding: 1rem 2rem;
        border-radius: 8px;
        box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        margin: 1rem auto;
        text-align: center;
        max-width: 400px;
      }
      .secret-form label {
        display: block;
        font-size: 1.5rem;
        font-weight: bold;
        font-family: 'Georgia', serif;
        margin-bottom: 0.5rem;
      }
      .secret-form input {
        font-size: 1rem;
        padding: 0.5rem;
        width: 80%;
        margin-bottom: 0.5rem;
        border: 1px solid #ccc;
        border-radius: 4px;
      }
      .secret-form button {
        font-size: 1rem;
        padding: 0.5rem 1rem;
        background: gold;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-weight: bold;
      }
      .secret-form button:hover {
        background: darkgoldenrod;
      }
    </style>
</head>
<body>
    <div class="header-container">
      <img src="{{ url_for('static', filename='images/my_pic.png') }}"
           alt="My Picture"
           class="header-img">
      <h1 class="overlay-title">‚ú® Mindys Golden Tickets ‚ú®</h1>
    </div>

    {% if not has_key %}
      <form method="post" class="secret-form">
        <label for="key">Mindy, enter your secret key:</label>
        <input type="password" id="key" name="key" placeholder="Secret key" autocomplete="off" required>
        <button type="submit">Unlock</button>
      </form>
    {% endif %}

    <div class="ticket-container">
        {% for ticket in tickets %}
            {% if ticket %}
                {% if has_key %}
                    <a href="{{ url_for('use_ticket', ticket_id=loop.index0) }}" class="ticket">üéüÔ∏è</a>
                {% else %}
                    <span class="ticket">üéüÔ∏è</span>
                {% endif %}
            {% else %}
                <span class="ticket used">‚ùå</span>
            {% endif %}
        {% endfor %}
    </div>

    <p>{{ tickets | select('equalto', true) | list | length }} tickets remaining.</p>
</body>
</html>